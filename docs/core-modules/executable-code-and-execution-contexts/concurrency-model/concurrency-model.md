---
nav:
  title: æ ¸å¿ƒæ¨¡å—
  order: 3
group:
  title: å¹¶å‘æ¨¡å‹
  order: 5
title: å¹¶å‘æ¨¡å‹
order: 1
---

# å¹¶å‘æ¨¡å‹

## åŸºæœ¬æ¦‚å¿µ

åœ¨äº†è§£ JavaScript å•çº¿ç¨‹ã€éé˜»å¡æœºåˆ¶ä¹‹å‰ï¼Œå…ˆäº†è§£å‡ ç»„æ˜“æ··æ·†çš„æ¦‚å¿µã€‚

è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µä»¥åŠå…³ç³»ï¼š

- **è¿›ç¨‹ï¼ˆProcessï¼‰**ï¼šè¿›ç¨‹æ˜¯ç³»ç»Ÿèµ„æºåˆ†é…å’Œè°ƒåº¦çš„å•å…ƒã€‚ä¸€ä¸ªè¿è¡Œç€çš„ç¨‹åºå°±å¯¹åº”äº†ä¸€ä¸ªè¿›ç¨‹ã€‚ä¸€ä¸ªè¿›ç¨‹åŒ…æ‹¬äº†è¿è¡Œä¸­çš„ç¨‹åºå’Œç¨‹åºæ‰€ä½¿ç”¨åˆ°çš„å†…å­˜å’Œç³»ç»Ÿèµ„æºã€‚
- **çº¿ç¨‹ï¼ˆThreadï¼‰**ï¼šçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸‹çš„æ‰§è¡Œè€…ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ï¼Œä¹Ÿå¯ä»¥å¼€å¯å¤šä¸ªçº¿ç¨‹ã€‚

å¹¶è¡Œå’Œå¹¶å‘çš„æ¦‚å¿µï¼š

- **å¹¶è¡Œï¼ˆParallelismï¼‰**ï¼šæŒ‡ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ï¼Œåœ¨åŒä¸€æ—¶é—´å†…æœ‰å‡ ä»¶äº‹æƒ…å¹¶è¡Œåœ¨å¤„ç†ã€‚ç”±äºä¸€ä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€ä»¶äº‹æƒ…ï¼Œæ‰€ä»¥å¹¶è¡Œéœ€è¦å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶é—´æ‰§è¡Œå¤šä»¶äº‹æƒ…ã€‚
- **å¹¶å‘ï¼ˆConcurrencyï¼‰**ï¼šæŒ‡ç¨‹åºçš„è®¾è®¡ç»“æ„ï¼Œåœ¨åŒä¸€æ—¶é—´å†…å¤šä»¶äº‹æƒ…èƒ½è¢«äº¤æ›¿åœ°å¤„ç†ã€‚é‡ç‚¹æ˜¯ï¼Œåœ¨æŸä¸ªæ—¶é—´å†…åªæœ‰ä¸€ä»¶äº‹æƒ…åœ¨æ‰§è¡Œã€‚æ¯”å¦‚å•æ ¸ CPU èƒ½å®ç°å¤šä»»åŠ¡è¿è¡Œçš„è¿‡ç¨‹å°±æ˜¯å¹¶å‘ã€‚

é˜»å¡å’Œéé˜»å¡çš„æ¦‚å¿µï¼š

- **é˜»å¡ï¼ˆBlockingï¼‰**ï¼šé˜»å¡æ˜¯æŒ‡è°ƒç”¨åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­çº¿ç¨‹è¢«æŒ‚èµ·ï¼ˆCPU èµ„æºè¢«åˆ†é…åˆ°å…¶ä»–åœ°æ–¹å»ï¼‰
- **éé˜»å¡ï¼ˆNon-blockingï¼‰**ï¼šéé˜»å¡æ˜¯æŒ‡ç­‰å¾…çš„è¿‡ç¨‹ CPU èµ„æºè¿˜åœ¨è¯¥çº¿ç¨‹ä¸­ï¼Œçº¿ç¨‹è¿˜èƒ½åšå…¶ä»–çš„äº‹æƒ…

å†æ¥åŒºåˆ†å•çº¿ç¨‹å’Œå¤šçº¿ç¨‹çš„åŒºåˆ«ï¼š

- **å•çº¿ç¨‹**ï¼šä»å¤´æ‰§è¡Œåˆ°å°¾ï¼Œé€è¡Œæ‰§è¡Œï¼Œå¦‚æœå…¶ä¸­ä¸€è¡Œä»£ç æŠ¥é”™ï¼Œé‚£ä¹ˆå‰©ä¸‹ä»£ç å°†ä¸å†æ‰§è¡Œã€‚åŒæ—¶å®¹æ˜“ä»£ç é˜»å¡ã€‚
- **å¤šçº¿ç¨‹**ï¼šä»£ç è¿è¡Œçš„ç¯å¢ƒä¸åŒï¼Œå„çº¿ç¨‹ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ï¼Œé¿å…é˜»å¡ã€‚

åŒæ­¥ä¸å¼‚æ­¥çš„æ¦‚å¿µï¼š

* **åŒæ­¥ï¼ˆSynchronousï¼‰**ï¼šç¨‹åºå‘å‡ºè°ƒç”¨çš„æ—¶å€™ï¼Œä¸€ç›´ç­‰å¾…ç›´åˆ°è¿”å›ç»“æœï¼Œæ²¡æœ‰ç»“æœä¹‹å‰ä¸ä¼šè¿”å›ã€‚ä¹Ÿå°±æ˜¯ï¼ŒåŒæ­¥æ—¶è°ƒç”¨è€…ä¸»åŠ¨ç­‰å¾…è°ƒç”¨è¿‡ç¨‹ï¼Œä¸”èƒ½ç«‹å³å¾—åˆ°ç»“æœçš„ã€‚
* **å¼‚æ­¥ï¼ˆAsynchronousï¼‰**ï¼šç¨‹åºå‘å‡ºè°ƒç”¨ä¹‹åï¼Œæ— æ³•ç«‹å³å¾—åˆ°ç»“æœï¼Œéœ€è¦é¢å¤–çš„æ“ä½œæ‰èƒ½å¾—åˆ°é¢„æœŸçš„ç»“æœæ˜¯ä¸ºå¼‚æ­¥ã€‚

## è¿è¡Œç¯å¢ƒ

JavaScript çš„è¿è¡Œé€šå¸¸æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­è¿›è¡Œçš„ï¼Œå…·ä½“ç”± JavaScript å¼•æ“å»è§£æå’Œè¿è¡Œã€‚

### æµè§ˆå™¨çº¿ç¨‹

ç›®å‰æœ€ä¸ºæµè¡Œçš„æµè§ˆå™¨ä¸ºï¼šChromeã€IEã€Safariã€Firefoxã€Operaã€‚æµè§ˆå™¨çš„å†…æ ¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œé€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªå¸¸é©»çš„çº¿ç¨‹ç»„æˆï¼š

- æ¸²æŸ“å¼•æ“çº¿ç¨‹ï¼šè´Ÿè´£é¡µé¢çš„æ¸²æŸ“
- JavaScript å¼•æ“çº¿ç¨‹ï¼šè´Ÿè´£ JavaScript çš„è§£æå’Œæ‰§è¡Œ
- å®šæ—¶è§¦å‘å™¨çº¿ç¨‹ï¼šå¤„ç†å®šæ—¶äº‹ä»¶ï¼Œæ¯”å¦‚ `setTimeout`ã€`setInterval`
- æµè§ˆå™¨äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šå¤„ç† DOM äº‹ä»¶
- å¼‚æ­¥ HTTP è¯·æ±‚çº¿ç¨‹ï¼šå¤„ç† HTTP è¯·æ±‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¸²æŸ“çº¿ç¨‹å’Œ JavaScript å¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚æ¸²æŸ“çº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼ŒJavaScript å¼•æ“çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚å› ä¸º JavaScript å¯ä»¥æ“ä½œ DOMï¼Œè‹¥åœ¨æ¸²æŸ“ä¸­ JavaScript å¤„ç†äº† DOMï¼Œæµè§ˆå™¨å¯èƒ½ä¼šä¸çŸ¥æ‰€æªäº†ã€‚

### å†…æ ¸å¼•æ“

é€šå¸¸è®²åˆ°æµè§ˆå™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè¯´åˆ°ä¸¤ä¸ªæµè§ˆå™¨çš„æ ¸å¿ƒç»„ä»¶ï¼šæ¸²æŸ“å¼•æ“ï¼ˆRendering Engineï¼‰å’Œ JavaScript è§£é‡Šå™¨ï¼ˆJavaScript Interpreterï¼‰ã€‚

|    æµè§ˆå™¨å‚å•†     |       æ¸²æŸ“å¼•æ“       |            JavaScript è§£é‡Šå™¨             |
| :---------------: | :------------------: | :--------------------------------------: |
|      Chrome       |   Webkit => Blink    |                    V8                    |
|      Safari       |        Webkit        |                  Nitro                   |
|      Firefox      |        Gecko         | SpiderMonky / TraceMonkey / JaegerMonkey |
|       Opera       |   Presto => Blink    | Linear A / Linear B / Futhark / Carakan  |
| Internet Explorer | Trident => EdgeHTML  |          JScript / Chakraï¼ˆ9+ï¼‰          |
|       Edge        | EdgeHTML => Chromium |                  Chakra                  |

> æ³¨ï¼šWebkit å¼•æ“åŒ…å« WebCore æ’ç‰ˆå¼•æ“åŠ JavaScript Core è§£æå¼•æ“

ä¸åŒçš„æ¸²æŸ“å¼•æ“å¯¹åŒä¸€ä¸ªæ ·å¼çš„å®ç°ä¸ä¸€è‡´ï¼Œå°±å¯¼è‡´äº†ç»å¸¸è¢«äººè¯Ÿç—…çš„æµè§ˆå™¨æ ·å¼å…¼å®¹æ€§é—®é¢˜ã€‚

JavaScript è§£é‡Šå™¨å¯ä»¥è¯´æ˜¯ JavaScript è™šæ‹Ÿæœºï¼Œè´Ÿè´£ JavaScript ä»£ç çš„è§£æå’Œæ‰§è¡Œã€‚è¿™é‡Œ [ç¼–è¯‘é˜¶æ®µ](../compilation/compilation.md) æœ‰è¯¦ç»†è§£è¯»ã€‚

## å•çº¿ç¨‹

JavaScript çš„**å•çº¿ç¨‹**ï¼Œä¸å®ƒçš„ç”¨é€”æœ‰å…³ã€‚ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScript çš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œ DOMã€‚è¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå‡å®š JavaScript åŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ª DOM èŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†å‘¢ï¼Ÿ

æ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¤æ‚æ€§ï¼Œä»ä¸€è¯ç”Ÿï¼ŒJavaScript è¿è¡Œç¯å¢ƒå°±æ˜¯å•çº¿ç¨‹ï¼Œè¿™å·²ç»æˆäº†è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒç‰¹å¾ï¼Œå°†æ¥ä¹Ÿä¸ä¼šæ”¹å˜ã€‚

ä¸ºäº†åˆ©ç”¨å¤šæ ¸ CPU çš„è®¡ç®—èƒ½åŠ›ï¼ŒHTML5 æå‡º Web Worker æ ‡å‡†ï¼Œå…è®¸ JavaScript è„šæœ¬åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸”ä¸å¾—æ“ä½œ DOMã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ–°æ ‡å‡†å¹¶æ²¡æœ‰æ”¹å˜ JavaScript å•çº¿ç¨‹çš„æœ¬è´¨ã€‚

âš ï¸ **æ³¨æ„**ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJavaScript çš„å•çº¿ç¨‹æ˜¯æŒ‡ä¸€ä¸ªç¨‹åºè¿›ç¨‹ï¼ˆåœ¨æµè§ˆå™¨è¿è¡Œç¯å¢ƒä¸­è¿è¡Œçš„å°±æ˜¯æµè§ˆå™¨è¿›ç¨‹ï¼‰ä¸­åªæœ‰ä¸€ä¸ª JavaScript çš„æ‰§è¡Œçº¿ç¨‹ï¼ŒåŒä¸€æ—¶åˆ»å†…åªä¼šæœ‰ä¸€æ®µ JavaScript ä»£ç åœ¨æ‰§è¡Œã€‚è€Œå¼‚æ­¥æœºåˆ¶æ˜¯è¿è¡Œç¯å¢ƒçš„ä¸¤ä¸ªæˆ–ä»¥ä¸Šå¸¸é©»çº¿ç¨‹å…±åŒå®Œæˆçš„ã€‚

## ä»»åŠ¡é˜Ÿåˆ—

JavaScript ä¸­çš„ç¨‹åºä»»åŠ¡å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š

- **åŒæ­¥ä»»åŠ¡ï¼ˆSynchronousï¼‰**ï¼šåŒæ­¥ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒç”¨ä¹‹åéœ€è¦ä¸€ç›´ç­‰å¾…ï¼Œåªæœ‰å½“å‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡
- **å¼‚æ­¥ä»»åŠ¡ï¼ˆAsynchronousï¼‰**ï¼šå¼‚æ­¥ä»»åŠ¡ä¼šåœ¨ä¸»çº¿ç¨‹å…ˆæ‰§è¡Œä¸€éƒ¨åˆ†ï¼Œç„¶åé€€å‡ºä¸»çº¿ç¨‹è‡³ä¸“ç”¨çº¿ç¨‹ä¸­æ‰§è¡Œã€‚åœ¨å¼‚æ­¥ä»»åŠ¡å‡†å¤‡å°±ç»ªåï¼Œä¼šè¢«æ¨è¿›ä»»åŠ¡é˜Ÿåˆ—ç­‰å¾…ï¼ˆTask Queueï¼‰ï¼Œå½“ä¸»çº¿ç¨‹ç©ºé—²æ—¶ï¼ŒJavaScript è§£é‡Šå™¨ä¼šæ‰§è¡Œä¸€æ¬¡äº‹ä»¶å¾ªç¯ï¼ˆEventLoopï¼‰å°†äº‹ä»¶é˜Ÿåˆ—ä¸­é¦–ä¸ªäº‹ä»¶æ¨è¿›ä¸»çº¿ç¨‹æ‰§è¡Œ

å…·ä½“æ¥è¯´ï¼Œ**å¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæœºåˆ¶**å¦‚ä¸‹ï¼š

1. æ‰€æœ‰åŒæ­¥ä»»åŠ¡åŠå¼‚æ­¥ä»»åŠ¡æŒ‰ç…§ [ç¼–è¯‘åŸç†](../compilation/compilation.md#ç¼–è¯‘åŸç†) åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ª [æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ](../execution/execution-context-stack.md)ï¼ˆExecution Context Stackï¼‰
2. åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆå¹¶è¿”å›ç»“æœåé€€å‡ºæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼›å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œä¸€éƒ¨åˆ†åï¼Œé€€å‡ºä¸»çº¿ç¨‹çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œæ¨è¿›è‡³è¿è¡Œç¯å¢ƒçš„ä¸“ç”¨çº¿ç¨‹ä¸­ç»§ç»­æ‰§è¡Œ
3. å½“è¿è¡Œç¯å¢ƒçš„ä¸“ç”¨çº¿ç¨‹ä¸­çš„å¼‚æ­¥ä»»åŠ¡å‡†å¤‡å°±ç»ªåï¼Œå°†è¢«æ¨è‡³ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ä¸­ç­‰å¾…æ‰§è¡Œ
4. ä¸»çº¿ç¨‹çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­çš„æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼ŒJavaScript è§£é‡Šå™¨å°±ä¼šé€šè¿‡äº‹ä»¶å¾ªç¯æœºåˆ¶æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦å­˜åœ¨ç­‰å¾…æ‰§è¡Œçš„äº‹ä»¶ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™é˜Ÿé¦–çš„å¼‚æ­¥ä»»åŠ¡å°†ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ‰§è¡Œ
5. JavaScript ä¸»çº¿ç¨‹è¿è¡ŒæœŸé—´å°†ä¸æ–­é‡å¤ä¸Šé¢ç¬¬å››æ­¥

```jsx | inline
import React from 'react';
import img from '../../../assets/concurrency-model/workflow.png';

export default () => <img alt="å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæœºåˆ¶å›¾è§£" src={img} width={720} />;
```

---

**å‚è€ƒèµ„æ–™ï¼š**

* [ğŸ“ èŠèŠ JavaScript ä¸æµè§ˆå™¨çš„é‚£äº›äº‹ï¼šå¼•æ“ä¸çº¿ç¨‹](<https://hijiangtao.github.io/2018/01/08/JavaScript-and-Browser-Engines-with-Threads/>)
* [ğŸ“ JavaScript å•çº¿ç¨‹å¼‚æ­¥çš„èƒŒåâ€”â€”äº‹ä»¶å¾ªç¯æœºåˆ¶](<https://zhuanlan.zhihu.com/p/27035708>)
* [ğŸ“ JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆ Event Loop](<http://www.ruanyifeng.com/blog/2014/10/event-loop.html>)
* [ğŸ¥ Philip Roverts: What the heck is the event loop anyway](<https://www.youtube.com/watch?v=8aGhZQkoFbQ>)

